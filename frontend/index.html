<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>ESP Web Flasher (NPM + FastAPI)</title>
    <style>
        /* 样式保持不变 */
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; line-height: 1.6; padding: 20px; max-width: 800px; margin: auto; }
        button { padding: 10px 15px; font-size: 16px; cursor: pointer; }
        button:disabled { cursor: not-allowed; opacity: 0.6; }
        select, input { padding: 8px; font-size: 16px; }
        .log-container { border: 1px solid #ccc; background-color: #f5f5f5; padding: 10px; height: 400px; overflow-y: scroll; font-family: "Courier New", Courier, monospace; white-space: pre-wrap; margin-top: 15px; }
    </style>
</head>
<body>
    <h1>ESP Web Flasher (由 NPM + FastAPI 驱动)</h1>
    
    <div>
        <label for="chip-select">选择芯片型号:</label>
        <select id="chip-select">
            <option value="esp32c3">ESP32-C3</option>
            <option value="esp32">ESP32</option>
        </select>
    </div>
    
    <div style="margin-top: 15px;">
        <button id="connectButton">1. 连接设备</button>
        <button id="flashButton" disabled>2. 开始烧录</button>
    </div>

    <div class="log-container" id="log">请先连接设备...</div>

    <!-- 
    旧的 CDN script 标签已被移除
    <script src="https://unpkg.com/esptool-js/bundle.js"></script> 
    -->
    
    <!-- 新的 script 标签，使用 type="module" -->
    <script type="module" src="/app.js"></script>
</body>
</html>

